   <app-navigation></app-navigation>
    <app-header></app-header>
  <body>

<div class="tab my-5">
    <!-- -------------------Recherche---------------- -->
    <div class="form-group col-md-3">
      <div class="input-group">
      <span class="input-group-text" id="inputGroupPrepend2"><i class="bi bi-search"></i></span>
      <input
        type="text"
        class="form-control"
        placeholder="Rechercher un utilisateur"
        [(ngModel)]="filterTerm"/>
      </div>
    </div>
    
    <table class="table table-hover w-75 my-3">
      <thead>
          <tr class="line">
              <th scope="col">Prenom</th>
              <th scope="col">Nom</th>
              <th scope="col">Email</th>
              <th scope="col">Rôle</th>
              <th *ngIf="this.currentUser.role === 'Utilisateur'" scope="col">Date inscription</th>
              <th *ngIf="this.currentUser.role === 'Administrateur'" scope="col">Actions</th>
          </tr>
      </thead>
      <!-- Recuperer et afficher les informations de la base de donnée -->
      <tbody *ngFor="let donnee of Users | filter: filterTerm | paginate: {itemsPerPage:6, currentPage:page, totalItems:totalLenght}">
        <tr *ngIf="donnee._id !== this.currentUser._id"> <!-- Pour filter l'utilisateur qui est connecté -->
              <td>{{ donnee.prenom }}</td>
              <td>{{ donnee.nom }}</td>
              <td>{{ donnee.email }}</td>
              <td>{{ donnee.role }}</td>
              <td *ngIf="this.currentUser.role === 'Administrateur'">
                <button class="btn link" (click)="archiver(donnee._id, donnee.etat)">
                  <i class="bi bi-arrow-down-square"></i>
                </button>
                <button class="btn link" data-toggle="modal" data-target="#modifier" (click)="getUserData(donnee._id,donnee.prenom,donnee.nom,donnee.email)">
                  <i class="bi bi-pencil-square"></i>
                </button>
                <button class="btn link" (click)="switcher(donnee._id, donnee.role)">
                  <i class="bi bi-arrow-left-right" ></i>
                </button>
              </td>
              <td *ngIf="this.currentUser.role === 'Utilisateur'">{{ donnee.createdAt | date:'d MMMM yyyy à HH:mm'}} </td>
          </tr>
      </tbody>
    </table>
  </div>
  <!-- ------------------------Pagination---------------------- -->
<div class="pagination fixed-bottom justify-content-center">
    <pagination-controls (pageChange)="page=$event"></pagination-controls>
</div>
    
</body>  